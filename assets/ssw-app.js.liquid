var sswCssId="socialshopwave",sswLink,sswHead,sswImg;
document.getElementById(sswCssId)||(sswHead=document.getElementsByTagName("head")[0],sswLink=document.createElement("link"),sswLink.id=sswCssId,sswLink.rel="stylesheet",sswLink.type="text/css",sswLink.href="{{ 'socialshopwave.css'| asset_url }}",sswLink.media="all",sswHead.appendChild(sswLink),sswImg=document.createElement("img"),sswImg.style.opacity=0,sswImg.style.position="absolute",sswImg.onerror=function(){document.body.removeChild(sswImg);var b=document.getElementById("ssw-temp-styles");b.parentNode.removeChild(b)},
document.body.appendChild(sswImg),sswImg.src=sswLink.href);var sswCustomCssId="socialshopwave-custom";document.getElementById(sswCustomCssId)||(sswHead=document.getElementsByTagName("head")[0],sswLink=document.createElement("link"),sswLink.id=sswCustomCssId,sswLink.rel="stylesheet",sswLink.type="text/css",sswLink.href="{{ 'socialshopwave-custom.css'| asset_url }}",sswLink.media="all",sswHead.appendChild(sswLink));
function sswGetParameterByName(b){b=b.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");b=(new RegExp("[\\?&]"+b+"=([^&#]*)")).exec(location.search);return null==b?"":decodeURIComponent(b[1].replace(/\+/g," "))}function sswGetPopupBounds(b,a){return"width="+b+", height="+a+", top="+(screen.height/2-a/2-60)+", left="+(screen.width/2-b/2-8)}
function sswGetBiggestPhoto(b,a){var c=0,d=b[c],f=document.createElement("img");f.src=b[c].src;f.onload=function(){d.width*d.height<f.width*f.height&&(d=b[c]);b[c+1]?(c++,f.src=b[c].src):a(d)}}function sswDispatchEvent(b,a){var c;try{c=new CustomEvent(b,a)}catch(d){c=document.createEvent("Event"),c.initEvent(b,a.bubbles?a.bubbles:!0,a.cancellable?a.cancellable:!1),a.detail&&(c.detail=a.detail)}document.dispatchEvent(c)}
function sswCoreLoaded(b){if("undefined"==typeof sswCoreJsLoaded)var a=setInterval(function(){"undefined"!=typeof sswCoreJsLoaded&&sswCoreJsLoaded&&(clearInterval(a),b(ssw))},10);else b(ssw)}function sswLibraryLoaded(b){if("undefined"==typeof sswCoreJsLoaded)var a=setInterval(function(){"undefined"!=typeof sswLibraryJsLoaded&&sswLibraryJsLoaded&&(clearInterval(a),b(ssw))},10);else b(ssw)}
function sswUserChecked(b){if("undefined"!=typeof userChecked&&userChecked)b(ssw);else var a=setInterval(function(){"undefined"!=typeof userChecked&&userChecked&&(clearInterval(a),b(ssw))},10)}if(!("placeholder"in document.createElement("input"))){sswHead=document.getElementsByTagName("head")[0];var script=document.createElement("script");script.type="text/javascript";script.src=sswProxyUrl+"/public/js/core/placeholders.js";sswHead.appendChild(script)}
var shop_url="http://"+Shopify.shop,sswJqLoaded=!1,ssw=!1,userChecked=!1,loadSswWidgetListingInterval=[],sswProductPins=[];function sswLoadScript(b,a){var c=document.createElement("script");c.type="text/javascript";c.readyState?c.onreadystatechange=function(){if("loaded"==c.readyState||"complete"==c.readyState)c.onreadystatechange=null,"function"==typeof a&&a()}:c.onload=function(){"function"==typeof a&&a()};c.src=b;document.getElementsByTagName("head")[0].appendChild(c)}var sswLoadJg=!0;
if("undefined"!==typeof jQuery&&-1==jQuery.fn.jquery.indexOf("1.8")){var sswClientJqVernums=jQuery.fn.jquery.split(".");if(1<parseInt(sswClientJqVernums[0])||7<parseInt(sswClientJqVernums[1]))sswLoadJg=!1}
sswLoadJg?sswLoadScript("//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js",function(){ssw=jQuery.noConflict(!0);sswJqLoaded=!0;sswDispatchEvent("sswjqueryload",{detail:{ssw:ssw},bubbles:!0,cancelable:!1});sswCookieLoad(ssw);checkUser(ssw)}):(ssw=jQuery,sswJqLoaded=!0,sswDispatchEvent("sswjqueryload",{detail:{ssw:ssw},bubbles:!0,cancelable:!1}),sswCookieLoad(jQuery),checkUser(jQuery));
function sswCookieLoad(b){b.cookie=function(a,c,d){if(1<arguments.length&&(null===c||"object"!==typeof c)){d=b.extend({},d);null===c&&(d.expires=-1);var f;if("number"===typeof d.expires){var e=d.expires;f=d.expires=new Date;f.setDate(f.getDate()+e)}else"string"===typeof d.expires&&(e=parseInt(d.expires),f=d.expires=new Date,f.setHours(f.getHours()+e));return document.cookie=[encodeURIComponent(a),"=",d.raw?String(c):encodeURIComponent(String(c)),d.expires?"; expires="+d.expires.toUTCString():"",d.path?
"; path="+d.path:"",d.domain?"; domain="+d.domain:"",d.secure?"; secure":""].join("")}d=c||{};e=d.raw?function(a){return a}:decodeURIComponent;return(f=(new RegExp("(?:^|; )"+encodeURIComponent(a)+"=([^;]*)")).exec(document.cookie))?e(f[1]):null};null==b.cookie("hesid")&&b.cookie("hesid",function(){var a=function(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)};return a()+a()+"-"+a()+"-"+a()+"-"+a()+"-"+a()+a()+a()}(),{path:"/"})}
function sswCookie(b,a,c){c=c?c:168;if(a&&c){var d=new Date;d.setHours(d.getHours()+c);a=escape(a)+(null==c?"":"; expires="+d.toUTCString());document.cookie=b+"="+a;return this}return(b=document.cookie.match(new RegExp("(?:^|; )"+b.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1")+"=([^;]*)")))?decodeURIComponent(b[1]):void 0}
function sswCheckBranding(){if(window.ssw.usercheckResponse.isFree||window.ssw.usercheckResponse.isLite){var b={"#login_modal .ssw-modal-footer":{name:"login_modal",css:{"margin-top":"5px"}},"#signup_modal .ssw-modal-footer":{name:"signup_modal",css:{"margin-top":"5px"}},"#notifyModal .ssw-modal-footer":{name:"notify_modal",css:{"margin-top":"10px"}},".ssw-social-login-widget":{name:"login_page",css:{"font-size":"12px","margin-top":"10px","float":"none"}},"#ssw-product-modal .ssw-modal-footer":{name:"product_modal",
css:{"margin-top":"10px"}},"#ssw-action-modal .ssw-modal-footer":{name:"action_modal",css:{"margin-top":"10px"}}},a=$(window.ssw.usercheckResponse.watermark),c;for(c in b)if(b.hasOwnProperty(c)){var d=a.clone();d.attr("href",d.attr("href")+b[c].name).css(b[c].css);$(c).append(d)}}else ssw("#ssw-product-modal .ssw-modal-footer").css("display","none")}
function checkUser(b){if("undefined"!=typeof sswApp["default"]&&0==sswApp["default"]){var a={_sid:sswCookie("hesid"),hash_key:sswCookie("hash_key")},c=!1;"undefined"!==typeof localStorage&&(b.cookie("cart")&&localStorage.getItem("ssw_cart")!=b.cookie("cart")&&(c=!0,a.cart_token=b.cookie("cart")),localStorage.getItem("ssw_our_revenue")&&(c=!0,a.revenue=JSON.parse(localStorage.getItem("ssw_our_revenue"))));a.hash_key||(c=!0);c&&b.post(sswProxyUrl+"/lite2/user/check",a,function(b){"undefined"!==typeof b.hash_key&&
b.hash_key&&ssw.cookie("hash_key",b.hash_key,{expires:30,path:"/"});"undefined"!==typeof a.cart_token&&localStorage.setItem("ssw_cart",a.cart_token);"undefined"!==typeof a.revenue&&localStorage.removeItem("ssw_our_revenue")},"json")}else{c={_sid:sswCookie("hesid"),hash_key:sswCookie("hash_key")};if("undefined"!==typeof sswApp.customer&&(c.customer_id=sswApp.customer.id,"undefined"!==typeof localStorage)){var d=localStorage.getItem("ssw-wishlist");d&&(c.wishlist=JSON.parse(d),localStorage.removeItem("ssw-wishlist"));
if(d=localStorage.getItem("challenge_password"))c.challenge_password=d,localStorage.removeItem("challenge_password")}"undefined"!=typeof sswCookie("cart")&&(c.cart_token=sswCookie("cart"));"undefined"!=typeof sswCookie("ssw_our_session")&&(c.ssw_our_session=sswCookie("ssw_our_session"));"undefined"!=typeof sswCookie("ssw_referrer")&&(c.ssw_referrer=sswCookie("ssw_referrer"));"undefined"!==typeof localStorage&&(d=localStorage.getItem("ssw_our_revenue"))&&(c.revenue=JSON.parse(d));b.ajax({type:"post",
url:sswProxyUrl+"/lite2/user/check",data:c,success:function(a){window.ssw_enable_quickview=a.enable_quickview;if("undefined"!=typeof a.discount&&a.discount){b("#ssw-discount-code").html(a.discount.code);b("#discount-date").html("Valid until "+a.discount.date);var c=b("#discount-instructions");c.html(a.discount.instructions+c.html());b("#ssw-discount-modal").sswModal()}1==a.show_follow&&"undefined"!=typeof showFollowPopup&&setTimeout(function(){showFollowPopup()},5E3);"logout"!=a.result&&"User not found"!=
a.result||sswCookie("hesid",null);a.hash_key&&ssw.cookie("hash_key",a.hash_key,{expires:30,path:"/"});!a.cart||"undefined"!=typeof ssw.cookie("cart")&&ssw.cookie("cart")==a.cart||ssw.get("/cart.json",function(b){b.item_count||ssw.cookie("cart",a.cart,{expires:14,path:"/"})});userChecked=!0;window.ssw.usercheckResponse=a;window.ssw.isFree=a.isFree;window.ssw.isLite=a.isLite;window.ssw.apps=a.apps;window.ssw.suggest_login=a.suggest_login;window.ssw.suggest_login_period=a.suggest_login_period;window.ssw.login_redirect_url=
a.login_redirect_url;a.modules&&(window.ssw.modules=a.modules);window.sswHelperLoaded?sswCheckBranding():window.addEventListener("sswhelperload",sswCheckBranding);"undefined"!==typeof sswApp.customer&&localStorage.getItem("ssw-wishlist")&&localStorage.removeItem("ssw-wishlist");localStorage.removeItem("ssw_our_revenue");sswDispatchEvent("sswusercheck",{detail:{ajaxResponse:a},bubbles:!0,cancelable:!1})},dataType:"json",async:!0})}}
if("undefined"!==typeof sswApp.customer){var url=sswGetParameterByName("checkout_url");url&&(location.href=url)}sswHelperLoaded=!1;var sswXhr=new XMLHttpRequest;sswXhr.open("GET","/?view=ssw-async");sswXhr.send();
sswXhr.onreadystatechange=function(){if(4==sswXhr.readyState){var b=document.createElement("div");b.innerHTML=sswXhr.responseText;for(var a=b.getElementsByTagName("script"),c=0;c<a.length;c++)eval(a[c].text);document.body.appendChild(b);sswDispatchEvent("sswhelperload",{detail:{ajaxResponse:sswXhr.responseText,helperContainer:b},bubbles:!0,cancelable:!1});sswHelperLoaded=!0}};sswLoadScript("{{ 'ssw-libraries.js' | asset_url }}");
if("undefined"===typeof sswApp.customer){var serviceUserChecker=function(b,a){ssw.ajax({type:"POST",url:sswProxyUrl+"/lite2/auth/service",data:{user_id:b.authResponse.userID,service:a,access_token:b.authResponse.accessToken,hash_key:ssw.cookie("hash_key")},success:function(a){var c=new ShopifyLogin;"undefined"!==typeof a.service_id&&(service_id=a.service_id);a.status?(sl=sswSocialLogin=1,c.preLogin(a.email,a.password),c.login()):a.termsSignup||a.acceptMarketing?showAcceptTermsForm(a,"facebook",b):
c.setServiceUser(b,"facebook")},dataType:"json"})},validateLogin=function(){var b=ssw("#sem_modal_form");b.validate({rules:{password:{required:!0}},highlight:function(a){ssw(a).closest(".ssw-control-group").addClass("ssw-error")},success:function(a){ssw(a).closest(".ssw-control-group").removeClass("ssw-error")},submitHandler:function(){var a=new ShopifyLogin,c=ssw("#sem_password").val();a.preLogin(ssw("#sem_email").val(),c);var d=b.data("account-activation");"object"==typeof d?(d.customer={password:c,
password_confirmation:c},a.login(d),b.data("account-activation",!1)):a.login()}});ssw("#set-email-form").validate({rules:{email:{required:!0,email:!0}},highlight:function(a){ssw(a).closest(".ssw-control-group").addClass("ssw-error")},success:function(a){ssw(a).closest(".ssw-control-group").removeClass("ssw-error")},submitHandler:function(){ssw.ajax({type:"POST",url:sswProxyUrl+"/lite2/auth/setEmail",data:{_sid:ssw.cookie("hesid"),service_id:ssw("#service_id").val(),email:ssw("#set-email-input").val()},
success:function(a){switch(a.error){case 0:var b=new ShopifyLogin;b.preLogin(a.email,a.password);b.login();break;case 1:a.user&&(b=[],a.user.twitter||b.push(".ssw-twconnect"),a.user.tumblr||b.push(".ssw-tmconnect"),a.user.instagram||b.push(".ssw-inconnect"),a=ssw("#login_modal"),a.find(b.join()).hide(),a.sswModal("show"),addMessage("#login_modal .login-failed",sswLangs.t("this_email_is_already_used"),"info"));break;case 2:addMessage2SetMailForm(sswLangs.t("incorrect_data"));break;case 3:addMessage2SetMailForm(sswLangs.t("tumblr_user_not_found"));
break;case 4:addMessage2SetMailForm(sswLangs.t("not_created_customer_on_shopify"));break;case 5:addMessage2SetMailForm(sswLangs.t("problem_on_create_user"))}},dataType:"json"})}});ssw("#he_create_customer").validate({rules:{email:{required:!0,email:!0}},highlight:function(a){ssw(a).closest(".ssw-control-group").addClass("ssw-error")},success:function(a){ssw(a).closest(".ssw-control-group").removeClass("ssw-error")},submitHandler:function(){(new ShopifyLogin).signUp()}});ssw("#he_customer_login").validate({rules:{"customer[email]":{required:!0,
email:!0},"customer[password]":{required:!0,minlength:6}},highlight:function(a){ssw(a).closest(".ssw-control-group").addClass("ssw-error")},success:function(a){ssw(a).closest(".ssw-control-group").removeClass("ssw-error")},submitHandler:function(){(new ShopifyLogin).login()}})},onOpenForm=function(){ssw(".ssw-login form").css("opacity","1");ssw(".ssw-login form input").removeAttr("disabled").attr("enabled","enabled");ssw(".ssw-signup-loading").hide();ssw(".he-login").css("opacity","1");ssw(".he-login input").removeAttr("disabled").attr("enabled",
"enabled");ssw(".ssw-login-loading").hide()},onSubmitForm=function(){ssw(".ssw-login form").css("opacity","0.3");ssw(".ssw-login form input").removeAttr("enabled").attr("disabled","disabled");ssw(".ssw-signup-loading").show();ssw(".he-login").css("opacity","0.3");ssw(".he-login input").removeAttr("enabled").attr("disabled","disabled");ssw(".ssw-login-loading").show()},addMessage2SetMailForm=function(b){var a=ssw("#set-email-error");a.html(b);a.show()},loginLoaderCancel=function(){ssw("#ssw-login-loader").parent().remove()},
loginLoader=function(){ssw(".ssw-modal").sswModal("hide");ssw("body").prepend('<div style="background: none repeat scroll 0 0 rgba(255, 255, 255, 0.77);height: 100%;position: fixed;width: 100%;z-index: 999;"><div class="ssw-login-loading" id="ssw-login-loader"> <span class="ssw-spin ssw-loader"></span> </div> </div>');ssw("#ssw-login-loader").css("opacity",1);ssw("#ssw-login-loader").css({position:"fixed",top:"50%",left:"50%"})},shopCallback4TTI=function(b,a){onSubmitForm();var c=sswProxyUrl+"/lite2/auth/",
d=c+b+"?_sid="+ssw.cookie("hesid")+"&shop="+Shopify.shop;ssw.oauthpopup({path:d,callback:function(){ssw.ajax({type:"POST",url:c+"shopCallback",dataType:"json",data:{_sid:ssw.cookie("hesid"),hash_key:ssw.cookie("hash_key"),service:a},success:function(a){sswSocialLogin=1;"undefined"!==typeof a.service_id&&(service_id=a.service_id);if(ssw.isEmptyObject(a))onOpenForm();else if(a.termsSignup||a.acceptMarketing)showAcceptTermsForm(a);else if(a.password){var b=new ShopifyLogin;b.preLogin(a.email,a.password);
b.login()}else onOpenForm(),ssw("#service_id").val(a.service_id),ssw(".ssw-modal").sswModal("hide"),ssw("#set-email-modal").sswModal()}})}})},targetSEMModal=function(b,a){var c="",d;b.first_name&&(c+=b.first_name+" ");b.last_name&&(c+=b.last_name);"invited"==b.state?(ssw("#sem_btn").hide(),ssw("#sem_forgot").hide(),ssw("#sem_password").hide(),d=sswLangs.t("already_registered_and_sent_invite_message",[b.email,a])):"enabled"!=b.state?(ssw("#sem_btn").hide(),ssw("#sem_forgot").hide(),b.account_activation_token&&
b.email?(d=sswLangs.t("already_registered_to_social_service",[b.email,a]),ssw("#sem_modal_form").data("account-activation",{customer_id:b.customer_id,token:b.account_activation_token})):(ssw("#sem_password").hide(),d=sswLangs.t("already_registered_and_disabled_account",[b.email,a]))):d=sswLangs.t("already_registered_to_social_service",[b.email,a]);onOpenForm();ssw("#social_exist_modal .ssw-img-circle").attr("src",b.photo_url);ssw("#sem_name").html(c);ssw("#sem_email").val(b.email);ssw("#sem_text").html(d);
ssw("#login_modal").sswModal("hide");ssw("#social_exist_modal").sswModal()},showAcceptTermsForm=function(b,a,c){a?(ssw("#accept-terms-modal").data("own-app",{user:c,service:a}),ssw(".terms-email-group").hide()):ssw("#accept-terms-modal").removeData("own-app");ssw("#signup_modal").sswModal("hide");ssw("#login_modal").sswModal("hide");b.service_id&&ssw("#ssw-accept-terms-service_id").val(b.service_id);b.email&&(ssw("#terms-email-input").val(b.email),ssw(".terms-email-group").hide());b.termsLink&&(ssw("#accept-terms-modal .terms-link").attr("href",
b.termsLink).show(),ssw("#accept-terms-modal .terms-span").hide());b.termsSignup||ssw(".accept_terms-group").hide();b.acceptMarketing||ssw(".accepts_marketing-group").hide();onOpenForm();ssw("#accept-terms-modal").sswModal()},sswOnAcceptMarketing=function(b){"accept_terms"==b.name&&(b.checked?ssw("#ssw-customer-accepts_marketing").val(!0):ssw("#ssw-customer-accepts_marketing").val(!1))},sswOnAcceptTerms=function(b){"accept_terms"==b.name?b.checked?(ssw("#ssw-cancel-account-button").hide(),ssw("#ssw-create-account-button").show()):
(ssw("#ssw-cancel-account-button").show(),ssw("#ssw-create-account-button").hide()):"terms"==b.name&&(b.checked?(ssw("#hesy-sign-up-cancel").hide(),ssw("#hesy-sign-up-submit").show()):(ssw("#hesy-sign-up-cancel").show(),ssw("#hesy-sign-up-submit").hide()))},sswCancelAccount=function(){ssw("#accept-terms-modal").sswModal("hide");onOpenForm()},sswCreateAccount=function(){var b=ssw("#accept-terms-modal").data("own-app");ssw("#ssw-create-account-button").attr("disabled","disabled");if(b)(new ShopifyLogin).setServiceUser(b.user,
b.service);else return ssw.ajax({type:"POST",url:sswProxyUrl+"/lite2/auth/acceptTerms",data:{_sid:ssw.cookie("hesid"),service_id:ssw("#ssw-accept-terms-service_id").val(),accepts_marketing:ssw("#ssw-accept-marketing-checkbox")[0].checked,accept_terms:ssw("#ssw-accept-marketing-checkbox")[0].checked,email:ssw("#terms-email-input").val()},success:function(a){switch(a.error){case 0:var b=new ShopifyLogin;b.preLogin(a.email,a.password);b.login();break;case 1:a.user&&(b="",a.user.twitter||(b+=".ssw-twconnect, "),
a.user.tumblr||(b+=".ssw-tmconnect, "),a.user.instagram||(b+=".ssw-inconnect"),a=ssw("#login_modal"),a.find(b).hide(),a.sswModal("show"),addMessage("#login_modal .login-failed",sswLangs.t("this_email_is_already_used"),"info"))}},dataType:"json"}),!1},service_id=0,sl=0,sswSocialLogin=0,addMessage=function(b,a,c){c="undefined"!==typeof c?"ssw-alert-"+c:"";ssw(b).prepend('<div class="ssw-alert '+c+' ssw-fade ssw-in"><button class="ssw-close" data-dismiss="ssw-alert">&times;</button>'+a+"</div>")},ShopifyLogin=
function(){var b=this;this.check_customer_count=0;this.preLogin=function(a,b){ssw("#ssw-customer-email").val(a);ssw("#ssw-customer-password").val(b)};this.setServiceUser=function(a,c){if("facebook"==c)FB.api("/me",{fields:"id,email,first_name,gender,last_name,link,locale,name,timezone,updated_time,verified"},function(d){ssw.ajax({type:"POST",url:sswProxyUrl+"/lite2/auth/setService",data:{user_id:a.authResponse.userID,access_token:a.authResponse.accessToken,user:d,service:c,_sid:ssw.cookie("hesid"),
accepts_marketing:ssw("#ssw-accept-marketing-checkbox")[0].checked},success:function(a){service_id=a.service_id;0==a.user_id?(onOpenForm(),ssw(ssw(".ssw-socialconnect")[1]).prev().remove(),ssw(ssw(".ssw-socialconnect")[1]).next().remove(),ssw(ssw(".ssw-socialconnect")[1]).next().remove(),ssw(ssw(".ssw-socialconnect")[1]).remove(),ssw("div.ssw-alert").remove(),ssw("#first_name").val(d.first_name),ssw("#last_name").val(d.last_name),ssw("#email").val(d.email),ssw("#login_modal").sswModal("hide"),ssw("#signup_modal").sswModal("show")):
"enabled"!=a.state?targetSEMModal(a,"Facebook"):!a.password&&a.email?targetSEMModal(a):(b.preLogin(a.email,a.password),b.login())},dataType:"json"})});else if("gplus"==c){var d=a.gplusData;ssw.ajax({type:"POST",url:sswProxyUrl+"/lite2/auth/glogin",data:d,success:function(a){sswSocialLogin=1;service_id=a.service_id;0==a.user_id?(onOpenForm(),ssw(ssw(".socialconnect")[1]).prev().remove(),ssw(ssw(".socialconnect")[1]).next().remove(),ssw(ssw(".socialconnect")[1]).next().remove(),ssw(ssw(".socialconnect")[1]).remove(),
ssw("div.ssw-alert").remove(),ssw("#first_name").val(d.first_name),ssw("#last_name").val(d.last_name),ssw("#email").val(d.email),ssw("#login_modal").sswModal("hide"),ssw("#signup_modal").sswModal("show")):"enabled"!=a.state?targetSEMModal(a,"glus"):a.password?(b.preLogin(a.email,a.password),b.login()):targetSEMModal(a,"gplus")},dataType:"json"})}};this.redirectAfterAuth=function(a,b,d){var c=(-1<navigator.userAgent.indexOf("Chrome")||-1==navigator.userAgent.indexOf("Safari"))&&-1==navigator.userAgent.indexOf("Firefox")&&
"https:"==location.protocol,e=location.protocol;c&&(e="http:"==location.protocol?"https:":"http:");a=a.clone();a.attr("id","ssw-test-login");a.find("input").removeAttr("id").removeAttr("class");d=d?d:""==window.ssw.login_redirect_url?location.pathname.indexOf("/account/")?location.href:location.protocol+"//"+location.hostname:window.ssw.login_redirect_url;c||(d=d.replace("https:","http:"));var h="?checkout_url="+encodeURIComponent(d);if(a[0]){c=a[0];a.hide();ssw(document.body).append(a);-1==d.indexOf("checkout.shopify.com")&&
a.attr("action",c.action.replace(location.protocol,e)+h);e=ssw('<input type="hidden" name="checkout_url" />');e.val(d);a.append(e);for(var g in b)b.hasOwnProperty(g)&&(e=b[g],d=a.find('input[name="'+e.name+'"]'),d.length&&(d.removeAttr("disabled"),d.attr("value",e.value)));c.submit()}};this.customerIdPage=function(a,b,d,f,e){var c=this;c.check_customer_count++;ssw.ajax({url:sswProxyUrl+"/lite2/auth/customeridpage",type:"POST",data:a,success:function(g){ssw.cookie("ssw-userchecked",0,{expires:-1});
var k=ssw("<div>");k.html(g);if(g=parseInt(k.find("#ssw-customer-id").html()))"undefined"==typeof sswCookie("cart")?ssw.post(sswProxyUrl+"/lite2/auth/customerCart",{_sid:sswCookie("hesid"),hash_key:sswCookie("hash_key"),customer_id:g},function(a){a.cart&&ssw.cookie("cart",a.cart,{expires:14,path:"/"});c.redirectAfterAuth(b,d,f)},"json"):c.redirectAfterAuth(b,d,f);else if(e&&5>c.check_customer_count)setTimeout(function(){c.customerIdPage(a,b,d,f,e)},1E3);else{sswSocialLogin?trackShopStats("invalid_social_login",
  "all"):trackShopStats("invalid_email_login","all");onOpenForm();loginLoaderCancel();ssw("#login_modal").sswModal("show");if(sl)addMessage("#login_modal .login-failed",sswLangs.t("not_able_to_log_in_you_socially"),"warning");else{addMessage("#login_modal .login-failed",sswLangs.t("invalid_login_credentials"),"warning");var l=ssw("#ssw-customer-email").val();ssw.post(sswProxyUrl+"/lite2/auth/checkUserState",{email:l},function(a){a&&(a.success?addMessage("#login_modal .login-failed",sswLangs.t("already_registered_and_sent_invite_message",
  [l]),"warning"):addMessage("#login_modal .login-failed",sswLangs.t("already_registered_and_disabled_account",[l]),"warning"))},"json")}sl=0;ssw("#hesy-login-submit").removeAttr("disabled").attr("enabled","enabled")}},dataType:"html"})};this.login=function(a){var b=this;onOpenForm();loginLoader();var d=ssw("#he_customer_login"),f=d.serializeArray(),e={_sid:ssw.cookie("hesid"),hash_key:ssw.cookie("hash_key"),service_id:service_id},h;for(h in f)if(f.hasOwnProperty(h)){var g=f[h];e[g.name]=g.value}"undefined"!=
  typeof sswCookie("cart")&&(e.cart_token=sswCookie("cart"));var k=sswGetParameterByName("checkout_url");""!=k&&(h=k.split("/"),e.form_type="customer_login",e.utf8="%E2%9C%93",e.checkout_url=encodeURIComponent(k),e.cart=h[h.length-1],e.customer={email:ssw("#ssw-customer-email").val(),password:ssw("#ssw-customer-password").val()});h="/account/login";g=e;a&&a.customer_id&&a.token&&a.customer&&a.customer.password&&a.customer.password_confirmation&&(h="/account/activate/"+a.customer_id+"/"+a.token,g=a,
  ""!=k&&(g.checkout_url=encodeURIComponent(k)));ssw.ajax({type:"POST",url:h,data:g,beforeSend:function(){onSubmitForm();ssw("#hesy-login-submit").attr("disabled","disabled");ssw("#login_modal .ssw-alert").sswAlert("close")},success:function(a){a=a.split("script").join("div");a=ssw("<div>").html(a).find("#ssw_cid").val();if(0==a||"0"==a)if(onOpenForm(),loginLoaderCancel(),ssw("#login_modal").sswModal("show"),sswSocialLogin?trackShopStats("invalid_social_login","all"):trackShopStats("invalid_email_login",
    "all"),ssw("#hesy-login-submit").removeAttr("disabled").attr("enabled","enabled"),1==sl)addMessage("#login_modal .login-failed",sswLangs.t("not_able_to_log_in_you_socially"),"warning");else{addMessage("#login_modal .login-failed",sswLangs.t("invalid_login_credentials"),"warning");var c=ssw("#ssw-customer-email").val();ssw.post(sswProxyUrl+"/lite2/auth/checkUserState",{email:c},function(a){a.success?addMessage("#login_modal .login-failed",sswLangs.t("already_registered_and_sent_invite_message",[c]),
    "warning"):addMessage("#login_modal .login-failed",sswLangs.t("already_registered_and_disabled_account",[c]),"warning")},"json")}else ssw.post(sswProxyUrl+"/lite2/auth/login",e,function(a){a.error?(sswSocialLogin?trackShopStats("invalid_social_login","all"):trackShopStats("invalid_email_login","all"),b.redirectAfterAuth(d,f,k)):!a.cart||"undefined"!=typeof sswCookie("cart")&&sswCookie("cart")==a.cart?b.redirectAfterAuth(d,f,k):ssw.get("/cart.json",function(c){c.item_count||ssw.cookie("cart",a.cart,
    {expires:14,path:"/"});b.redirectAfterAuth(d,f,k)})},"json");sl=0},dataType:"html"}).fail(function(){b.customerIdPage(e,d,f,k,!1)});-1!=navigator.userAgent.indexOf("Safari")&&-1==navigator.userAgent.indexOf("Chrome")&&setTimeout(function(){b.customerIdPage(e,d,f,k,!0)},1E3);sswSocialLogin=!1};this.signUp=function(){var a=this;onOpenForm();var b=ssw("#he_create_customer"),d=b.find('input[type="password"]').val(),f=ssw("#he_customer_login"),e=b.serializeArray(),h=b.serialize()+"&_sid="+ssw.cookie("hesid")+
    "&service_id="+service_id+"&hash_key="+ssw.cookie("hash_key"),g=sswGetParameterByName("checkout_url");""!=g&&(b=g.split("/"),h+="&form_type=customer_login&utf8==%E2%9C%93&checkout_url="+encodeURIComponent(g)+"&cart="+b[b.length-1]);ssw.ajax({type:"POST",url:"/account",data:h,beforeSend:function(){onSubmitForm();ssw("#hesy-sign-up-submit").removeAttr("enabled").attr("disabled","disabled");ssw("#signup_modal .ssw-alert").sswAlert("close")},success:function(b){b=b.split("script").join("div");var c=ssw("<div>").html(b),
      k=c.find(".errors li");0==k.length&&(k=c.find(".errors-list li"));0==k.length&&(k=c.find("#create_customer .note.form-error li"));k.length?(onOpenForm(),ssw("#hesy-sign-up-submit").removeAttr("disabled").attr("enabled","enabled"),k.each(function(){addMessage("#signup_modal .login-failed",ssw(this).text(),"warning");addMessage('form[action$="/account"]:not(#he_create_customer)',ssw(this).text(),"warning")})):-1!==b.indexOf("Too many attempts: Please fill out the captcha below")?ssw.ajax({type:"POST",
      url:sswProxyUrl+"/lite2/auth/encrypt",data:{password:d},success:function(a){"undefined"!==typeof a.new_password&&a.new_password&&"undefined"!==typeof localStorage&&(localStorage.setItem("challenge_password",a.new_password),location.href="/account/challenge")},dataType:"json"}).fail(function(a){location.href="/account/challenge"}):ssw.post(sswProxyUrl+"/lite2/auth/register",h,function(b){""!=g?a.redirectAfterAuth(f,e,g):0==b.error?(ssw.cookie("ssw-userchecked",0,{expires:-1}),a.redirectAfterAuth(f,
      e)):ssw(".login-failed").empty()},"json")},dataType:"html"}).fail(function(b){if(400<parseInt(b.status)){onOpenForm();var c=ssw("<div>").html(b.responseText).find("div.content > div.content--block:nth-child(2) > div.content--desc").html(),c=c?c:b.statusText;"Too many attempts: Please try again in 10 minutes"==ssw.trim(c)&&"undefined"!==typeof sswLangs.data.too_many_attempts&&(c=sswLangs.data.too_many_attempts);addMessage("#signup_modal .login-failed",c,"warning");addMessage('form[action$="/account"]:not(#he_create_customer)',
        c,"warning")}else ssw.ajax({url:sswProxyUrl+"/lite2/auth/customeridpage",success:function(b){ssw.cookie("ssw-userchecked",0,{expires:-1});b=parseInt(ssw(b).text());0<b?(h+="$customer_id="+b,ssw.post(sswProxyUrl+"/lite2/auth/register",h,function(b){""!=g?a.redirectAfterAuth(f,e,g):0==b.error?(ssw.cookie("ssw-userchecked",0,{expires:-1}),a.redirectAfterAuth(f,e)):ssw(".login-failed").empty()},"json")):(onOpenForm(),addMessage(sswLangs.t("email_is_already_associated")))},dataType:"html"})})}};"undefined"!=
        typeof sswApp["default"]&&sswApp["default"]&&sswRun(function(){ssw(document).ready(function(){var b=document.querySelector('form[action$="/account/login"]:not(#he_customer_login)'),a,c;b&&(a=b.querySelector('input[name="customer[email]"]'),c=b.querySelector('input[name="customer[password]"]'),a&&c&&(a.setAttribute("type","email"),a.setAttribute("required","required"),c.setAttribute("required","required"),b.addEventListener("submit",function(a){a.preventDefault();a.stopPropagation();a=b.querySelector('input[name="customer[email]"]').value;
        var c=b.querySelector('input[name="customer[password]"]').value;a&&c&&(ssw("#ssw-customer-email").val(a),ssw("#ssw-customer-password").val(c),(new ShopifyLogin).login())})));var d=document.querySelector('form[action$="/account"]:not(#he_create_customer)');if(d){a=d.querySelector('input[name="customer[email]"]');c=d.querySelector('input[name="customer[password]"]');var f=d.querySelector('input[name="customer[first_name]"]'),e=d.querySelector('input[name="customer[last_name]"]');a&&c&&f&&e&&(a.setAttribute("type",
        "email"),a.setAttribute("required","required"),c.setAttribute("required","required"),f.setAttribute("required","required"),e.setAttribute("required","required"),d.addEventListener("submit",function(a){a.preventDefault();a.stopPropagation();a=d.querySelector('input[name="customer[email]"]').value;var b=d.querySelector('input[name="customer[password]"]').value,c=d.querySelector('input[name="customer[first_name]"]').value,e=d.querySelector('input[name="customer[last_name]"]').value;if(a&&b&&c&&e){var f=
        ssw("#he_create_customer");f.find("#email").val(a);f.find("#password").val(b);f.find("#first_name").val(c);f.find("#last_name").val(e);(new ShopifyLogin).signUp()}}))}var h=document.querySelector('form[action="/account/recover"]');h&&((a=h.querySelector('input[name="email"]'))&&a.setAttribute("type","email"),h.addEventListener("submit",function(a){h._passWasUnset||(a.preventDefault(),a.stopPropagation());(a=h.querySelector('input[name="email"]').value)&&ssw.ajax({url:sswProxyUrl+"/lite2/auth/unsetpass",
        type:"POST",data:{email:a},dataType:"json",success:function(){h._passWasUnset=!0;h.submit()},error:function(){h._passWasUnset=!0;h.submit()}})}));var g=document.querySelector('form[action$="/account/reset"]');if(g){a=location.pathname.split("/account/reset/");var k=1<a.length?a[1].split("/")[0]:!1;k&&g.addEventListener("submit",function(a){g._passWasReset||(a.preventDefault(),a.stopPropagation());a=g.querySelector('input[name="customer[password]"]');var b=g.querySelector('input[name="customer[password_confirmation]"]');
        if(a=a.value&&b.value&&a.value==b.value?b.value:!1)b="function"==typeof window.btoa,ssw.ajax({url:sswProxyUrl+"/lite2/auth/resetpass",type:"POST",data:{customer_id:k,new_token:b?window.btoa(a):a,encoded:b},dataType:"json",success:function(){g._passWasReset=!0;g.submit()},error:function(){g._passWasReset=!0;g.submit()}})})}})});sswLibraryLoaded(function(){window.sswHelperLoaded?validateLogin():window.addEventListener("sswhelperload",validateLogin);ssw(document).on("click",".ssw-azconnect",function(){onSubmitForm();
        ssw.oauthpopup({path:HE_DOMAIN+"/lite2/auth/azconnect?_sid="+ssw.cookie("hesid")+"&shop="+Shopify.shop,windowOptions:sswGetPopupBounds(710,550),callback:function(){ssw.ajax({type:"POST",url:sswProxyUrl+"/lite2/auth/azshopcallback",data:{_sid:ssw.cookie("hesid"),hash_key:ssw.cookie("hash_key")},success:function(b){"undefined"!==typeof b.service_id&&(service_id=b.service_id);sswSocialLogin=1;if(ssw.isEmptyObject(b))onOpenForm();else if(b.termsSignup||b.acceptMarketing)showAcceptTermsForm(b);else if("enabled"!=
        b.state)targetSEMModal(b,"Amazon");else if(!b.password&&b.email)targetSEMModal(b,"Amazon");else if(b.password){var a=new ShopifyLogin;a.preLogin(b.email,b.password);a.login()}else addMessage("#login_modal .login-failed","sswLangs.t('already_registered_to_social_service2', [response.email])","warning"),ssw("#login_modal").sswModal()},dataType:"json"})}})});ssw(document).on("click",".ssw-yconnect",function(){onSubmitForm();var b=HE_DOMAIN+"/lite2/auth/yconnect?_sid="+ssw.cookie("hesid")+"&shop="+Shopify.shop;
        ssw.oauthpopup({path:b,callback:function(){ssw.ajax({type:"POST",url:sswProxyUrl+"/lite2/auth/yshopcallback",data:{_sid:ssw.cookie("hesid"),hash_key:ssw.cookie("hash_key")},success:function(a){sswSocialLogin=1;"undefined"!==typeof a.service_id&&(service_id=a.service_id);if(ssw.isEmptyObject(a))onOpenForm();else if(a.termsSignup||a.acceptMarketing)showAcceptTermsForm(a);else if("enabled"!=a.state)targetSEMModal(a,"Yahoo");else if(!a.password&&a.email)targetSEMModal(a,"Yahoo");else if(a.password){var b=
        new ShopifyLogin;b.preLogin(a.email,a.password);b.login()}else addMessage("#login_modal .login-failed",sswLangs.t("already_registered_to_social_service2",[a.email]),"warning"),ssw("#login_modal").sswModal()},dataType:"json"})}})});ssw(document).on("click",".ssw-twconnect",function(){shopCallback4TTI("twconnect","twitter")});ssw(document).on("click",".ssw-inconnect",function(){shopCallback4TTI("inconnect","instagram")});ssw(document).on("click",".ssw-tmconnect",function(){shopCallback4TTI("tmconnect",
        "tumblr")});ssw(document).on("keyup change","#he_create_customer input",function(){""!=ssw("#he_create_customer #email").val()&&""!=ssw("#he_create_customer #password").val()&&(ssw("#he_create_customer .ssw-first-name:hidden").length?ssw("#he_create_customer .ssw-first-name").slideDown():""!=ssw("#he_create_customer #first_name").val()&&ssw("#he_create_customer .ssw-last-name:hidden").length&&ssw("#he_create_customer .ssw-last-name").slideDown())});ssw(document).on("shown.ssw.modal","#login_modal",
        function(){ssw(document.body).hasClass("ssw-touch")||ssw("#ssw-customer-email").focus()});ssw(document).on("show.ssw.modal","#login_modal",function(){ssw(".ssw-modal:not(#login_modal)").sswModal("hide")});ssw(document).on("shown.ssw.modal","#signup_modal",function(){ssw(document.body).hasClass("ssw-touch")||ssw("#he_create_customer input").each(function(b,a){if(""==ssw(a).val())return ssw(a).focus(),!1})})});sswUserChecked(function(){var b=ssw.usercheckResponse;(b.termsSignup||b.acceptMarketing)&&
        ssw("#ssw-signup-accept-terms-marketing").show();b.termsSignup&&(ssw("#ssw-signup-accept-terms").show(),b.termsLink&&(ssw("#ssw-signup-accept-terms-marketing .terms-link").attr("href",b.termsLink).show(),ssw("#ssw-signup-accept-terms-marketing .terms-span").hide()));b.newsletterSubscribeDisable&&(ssw('#ssw-signup-accept-marketing input[type="checkbox"]').removeAttr("checked"),ssw("#ssw-customer-accepts_marketing").val(0));b.acceptMarketing&&(ssw("#ssw-customer-accepts_marketing").val(0),ssw("#ssw-signup-accept-marketing").show())})}
        sswUserChecked(function(){var b=ssw.usercheckResponse.briteVerifyKey;b&&sswLoadScript("//cdn.briteverify.com/bforms.js",function(a){a=document.createElement("link");a.setAttribute("rel","stylesheet");a.setAttribute("type","text/css");a.setAttribute("media","all");a.setAttribute("href","//cdn.briteverify.com/bforms.css");document.getElementsByTagName("head")[0].appendChild(a);var c=function(a){var b=ssw(a.el).closest("form");"invalid"===a.status?(b.attr("onsubmit","event.preventDefault(); event.stopPropagation();return false;"),
        b.find('[type="submit"]').attr("disabled","disabled")):("unknown"!==a.status&&"accept_all"!==a.status||this.promptConfirmation(),b.removeAttr("onsubmit"),b.find('[type="submit"]').removeAttr("disabled"))};a=document.querySelectorAll('form[action$="//'+location.hostname+'/account"]:not(#he_create_customer) [name="customer[email]"], form[action$="//'+Shopify.shop+'/account"]:not(#he_create_customer) [name="customer[email]"], #he_create_customer #email, #set-email-form #set-email-input');for(var d=[],
        f=a.length,e=0;e<f;e++){var h=a[e],g=BriteForm.create({formKey:b,emailInput:h});g.on("verification:end",c);d.push(g);(function(a){setTimeout(function(){ssw(a).hasClass("bv-invalid")&&c({el:a,status:"invalid"})},1200)})(h)}d.length&&(window.__ssw_bv_forms=d)})});